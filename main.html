<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EventCalendar</title>
   
    <link rel="icon" type="image/png" href="https://mq-edu.t1cloud.com/T1Default/CiAnywhere/Web/MQ-EDU/Workplace/v-12.0.235.0/t/MQ_STU_THEME/timages/logo-favicon.png?ts=-1811665815"> 
    <link rel="icon" type="image/png" href="https://mq-edu.t1cloud.com/T1Default/CiAnywhere/Web/MQ-EDU/Workplace/v-12.0.235.0/t/MQ_STU_THEME/timages/logo-favicon.png?ts=-1811665815"> 

    <link rel="icon" type="image/png" href="https://mq-edu.t1cloud.com/T1Default/CiAnywhere/Web/MQ-EDU/Workplace/v-12.0.235.0/t/MQ_STU_THEME/timages/logo-favicon.png?ts=-1811665815"> 
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="global.css?20231021">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@event-calendar/build@4.6.0/dist/event-calendar.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@event-calendar/build@4.6.0/dist/event-calendar.min.js"></script>
    <style>
        /* Top navigation styles */
        .top-bar {
            width: 100%;
            background: #800000;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 28px;
            height: 56px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            box-sizing: border-box;
        }
        .logo-and-breadcrumbs {
            display: flex;
            align-items: center;
            gap: 22px;
        }
        .logo-and-breadcrumbs img {
            height: 32px;
        }
        .breadcrumbs {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            user-select: none;
        }
        .breadcrumbs a {
            color: #ffd6d6;
            text-decoration: none;
        }
        .search-profile {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .search-box {
            padding: 6px 18px;
            border-radius: 18px;
            border: none;
            font-size: 15px;
            width: 200px;
        }
        .profile-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #d1d1d1;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
        }

        /* Sub navigation bar */
        .sub-bar {
            width: 100%;
            background: #f3f3f3;
            color: #3b3b3b;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 28px;
            border-bottom: 1px solid #e8e8e8;
            font-size: 15px;
            box-sizing: border-box;
            user-select: none;
        }
        .sub-left {
            display: flex;
            align-items: center;
            gap: 18px;
        }
        .help-button {
            background: #fff;
            border: 1px solid #eee;
            padding: 5px 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            color: #800000;
            cursor: pointer;
            font-weight: 600;
        }
        .filter-info {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .calendar-navigation {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .calendar-navigation button {
            background: #fff;
            border: 1px solid #ccc;
            padding: 4px 9px;
            border-radius: 5px;
            color: #800000;
            cursor: pointer;
            font-weight: 600;
            user-select: none;
        }
        .today-button {
            background: #800000;
            color: white;
        }
        .sub-right {
            display: flex;
            align-items: center;
            gap: 18px;
        }
        .menu-dots {
            font-size: 24px;
            color: #666666;
            cursor: pointer;
        }
        .close-x {
            font-size: 24px;
            color: #aaa;
            cursor: pointer;
            font-weight: bold;
        }

        /* Main layout adjustments */
        main.flex-row {
            display: flex;
            flex-direction: row;
            height: calc(100vh - 107px); /* header + subbar */
            overflow: hidden;
        }
        #ec {
            flex: 1 1 0%;
            min-width: 0;
            transition: flex-basis 0.3s;
        }
        #sidePane {
            width: 0;
            min-width: 0;
            max-width: 400px;
            background: #fff;
            border-left: 1px solid #eee;
            box-shadow: -2px 0 6px rgba(0,0,0,0.06);
            overflow: auto;
            transition: width 0.3s, min-width 0.3s;
            position: relative;
        }
        #sidePane.open {
            width: 400px;
            min-width: 350px;
        }
        .side-pane-content {
            padding: 16px 28px;
        }
        .close-pane {
            position: absolute;
            top: 10px;
            right: 18px;
            font-size: 28px;
            color: #aaa;
            cursor: pointer;
            font-weight: bold;
        }
        .close-pane:hover { color: #000; }
        body.ec-dark #sidePane { background: #222; color: #fff; }
        body.ec-dark .side-pane-content { background: #222; color: #fff; }
    </style>
</head><body>
    <div class="top-bar">
        <div class="logo-and-breadcrumbs">
            <img src="favicon-32x32.png" alt="Logo" />
            <div class="breadcrumbs">
                <a href="#">Home</a> &gt;
                <a href="#">My Calendar</a> &gt;
                <span>1 message</span>
            </div>
        </div>
        <div class="search-profile">
            <input class="search-box" type="text" placeholder="Enterprise Search" />
            <div class="profile-icon">&#9786;</div>
        </div>
    </div>
    <div class="sub-bar" id="subBar">
        <div class="sub-left">
            <button class="help-button">
                <span style="font-size:18px;">&#9432;</span> Help
            </button>
            <div class="filter-info">
                <span style="font-size:18px;">&#128269;</span>
                <span>5 records</span>
            </div>
            <div class="calendar-navigation">
                <button id="prevBtn">&lt;</button>
                <button id="nextBtn">&gt;</button>
                <button class="today-button" id="todayBtn">Today</button>
                <span id="dateRange">Mar 24 – 30, 2025</span>
            </div>
        </div>
        <div class="sub-right">
            <span class="menu-dots">&#8942;</span>
            <span
                class="close-x"
                onclick="document.getElementById('subBar').style.display='none'"
                >&times;</span
            >
        </div>
    </div>

    <main class="flex-row">
        <div id="ec"></div>
        <div id="sidePane">
            <span class="close-pane" onclick="closeSidePane()">&times;</span>
            <div class="side-pane-content" id="sidePaneContent"></div>
        </div>
    </main>

    <script type="text/javascript">
        // Create the calendar
        const ec = EventCalendar.create(document.getElementById("ec"), {
            view: "timeGridWeek",
            headerToolbar: {
                start: "",
                center: "title",
                end:
                    "dayGridMonth,timeGridWeek,timeGridDay,listWeek resourceTimeGridWeek,resourceTimelineWeek",
            },
            resources: [
                { id: 1, title: "Resource A" },
                { id: 2, title: "Resource B" },
            ],
            scrollTime: "09:00:00",
            events: createEvents(),
            views: {
                timeGridWeek: { pointer: true },
                resourceTimeGridWeek: { pointer: true },
                resourceTimelineWeek: {
                    slotDuration: "00:15",
                    slotLabelInterval: "01:00",
                    slotMinTime: "09:00",
                    slotMaxTime: "21:00",
                    slotWidth: 16,
                    resources: [
                        { id: 1, title: "Resource A" },
                        { id: 2, title: "Resource B" },
                        { id: 3, title: "Resource C" },
                        { id: 4, title: "Resource D" },
                        { id: 5, title: "Resource E" },
                        { id: 6, title: "Resource F" },
                        { id: 7, title: "Resource G" },
                        { id: 8, title: "Resource H" },
                        {
                            id: 9,
                            title: "Resource I",
                            children: [
                                { id: 10, title: "Resource J" },
                                { id: 11, title: "Resource K" },
                                {
                                    id: 12,
                                    title: "Resource L",
                                    children: [
                                        { id: 13, title: "Resource M" },
                                        { id: 14, title: "Resource N" },
                                        { id: 15, title: "Resource O" },
                                    ],
                                },
                            ],
                        },
                    ],
                },
            },
            dayMaxEvents: true,
            nowIndicator: true,
            selectable: true,
            eventClick: function (info) {
                showEventDetails(info.event);
            },
        });

        function createEvents() {
            // Sample events with extendedProps for deliveredInWeek and location
            let days = [];
            for (let i = 0; i < 7; ++i) {
                let day = new Date();
                let diff = i - day.getDay();
                day.setDate(day.getDate() + diff);
                days[i] =
                    day.getFullYear() +
                    "-" +
                    _pad(day.getMonth() + 1) +
                    "-" +
                    _pad(day.getDate());
            }
            return [
                {
                    id: "blockchain-monday",
                    start: days[1] + "T11:00:00",
                    end: days[1] + "T13:00:00",
                    resourceId: 1,
                    title: "ACCG2065 Tutorial_1 - 8",
                    extendedProps: {
                        deliveredInWeek: "Week 5",
                        location: "4 western Rd 335 Tutorial Rm 04WR, North Ryde",
                    },
                },
                {
                    id: "global-business",
                    start: days[1] + "T15:00:00",
                    end: days[1] + "T17:00:00",
                    resourceId: 2,
                    title: "MGMT1005 Tutorial_1 - 2",
                    extendedProps: {
                        deliveredInWeek: "Week 5",
                        location: "4 western Rd 335 Tutorial Rm 04WR, North Ryde",
                    },
                },
                {
                    id: "economics-wednesday",
                    start: days[3] + "T10:00:00",
                    end: days[3] + "T12:00:00",
                    resourceId: 2,
                    title: "MQBS2010 Tutorial_1-2",
                    extendedProps: {
                        deliveredInWeek: "Week 5",
                        location: "4 western Rd 335 Tutorial Rm 04WR, North Ryde",
                    },
                },
                {
                    id: "finance-wednesday",
                    start: days[3] + "T17:30:00",
                    end: days[3] + "T19:00:00",
                    resourceId: 1,
                    title: "ACST1001 Tutorial_1 - 10",
                    extendedProps: {
                        deliveredInWeek: "Week 5",
                        location: "4 western Rd 335 Tutorial Rm 04WR, North Ryde",
                    },
                },
                {
                    id: "blockchain-thursday",
                    start: days[4] + "T11:00:00",
                    end: days[4] + "T12:00:00",
                    resourceId: 1,
                    title: "ECON1020 Lectur",
                    extendedProps: {
                        deliveredInWeek: "Week 5",
                        location: "4 western Rd 335 Tutorial Rm 04WR, North Ryde",
                    },
                },
            ];
        }

        function _pad(num) {
            let norm = Math.floor(Math.abs(num));
            return (norm < 10 ? "0" : "") + norm;
        }

        // Show event details in side pane with full requested format
        function showEventDetails(event) {
            const sidePane = document.getElementById("sidePane");
            const content = document.getElementById("sidePaneContent");

            // Format date as "Wednesday, 26 March 2025"
            const eventDate = new Date(event.start);
            const options = {
                weekday: "long",
                day: "numeric",
                month: "long",
                year: "numeric",
            };
            const formattedDate = eventDate.toLocaleDateString(undefined, options);

            // Format times in 12-hour am/pm lower case
            const startTime = eventDate
                .toLocaleTimeString(undefined, { hour: "numeric", minute: "2-digit" })
                .toLowerCase();
            const endTime = new Date(event.end)
                .toLocaleTimeString(undefined, { hour: "numeric", minute: "2-digit" })
                .toLowerCase();

            // Calculate duration in hours and minutes
            const durationMs = new Date(event.end).getTime() - eventDate.getTime();
            const durationHrs = Math.floor(durationMs / (1000 * 60 * 60));
            const durationMins = Math.floor(
                (durationMs % (1000 * 60 * 60)) / (1000 * 60)
            );
            let durationStr = "";
            if (durationMins === 0) {
                durationStr = durationHrs + " hours";
            } else {
                durationStr = durationHrs + "h " + durationMins + "m";
            }

            const title = event.title || "Untitled Event";
            const deliveredInWeek = event.extendedProps.deliveredInWeek || "";
            const location = event.extendedProps.location || "";

            content.innerHTML = `
                <h2>${formattedDate}</h2>
                <h3>${title}</h3>
                <p><strong>${startTime} - ${endTime} (${durationStr})</strong></p>
                <p>Delivered in ${deliveredInWeek}</p>
                <p><strong>Location</strong></p>
                <p>${location.replace(/, /g, "<br>")}</p>
            `;

            sidePane.classList.add("open");
        }

        function closeSidePane() {
            document.getElementById("sidePane").classList.remove("open");
        }

        // Clicking outside side pane closes it
        document.addEventListener("click", function (event) {
            const sidePane = document.getElementById("sidePane");
            if (
                sidePane.classList.contains("open") &&
                !sidePane.contains(event.target) &&
                !document.getElementById("ec").contains(event.target)
            ) {
                closeSidePane();
            }
        });

        // Navigation buttons
        document
            .getElementById("prevBtn")
            .addEventListener("click", () => {
                ec.getApi().prev();
                updateDateRange();
            });
        document
            .getElementById("nextBtn")
            .addEventListener("click", () => {
                ec.getApi().next();
                updateDateRange();
            });
        document
            .getElementById("todayBtn")
            .addEventListener("click", () => {
                ec.getApi().today();
                updateDateRange();
            });

        function updateDateRange() {
            const view = ec.getApi().view;
            const start = view.currentStart;
            const end = new Date(view.currentEnd.getTime() - 1);
            const options = { month: "short", day: "numeric" };
            const startStr = start.toLocaleDateString(undefined, options);
            const endStr = end.toLocaleDateString(undefined, options);
            const yearStr = end.getFullYear();
            document.getElementById(
                "dateRange"
            ).textContent = `${startStr} – ${endStr}, ${yearStr}`;
        }

        updateDateRange();
    </script>
</body>
</html>